const a6_0x3407=['serializeOverrides','value','agentCount','data','response','error','mapRespToPerfEntry','throw','__awaiter','/nx-cloud/executions/start','axiosException','parseCommand','post','target','createApiAxiosInstance','axiosMultipleTries','../../../utilities/metric-logger','start','hash','../../../utilities/nx-imports','configuration','/nx-cloud/executions/status','getBranch','recordMetric','dteStatus','completeRunGroup','createMetricRecorder','completeRunGroupWithError','dteStart','map','NX_CLOUD_DISTRIBUTED_EXECUTION_STOP_AGENTS_ON_FAILURE','defineProperty','apiAxiosInstance','status','done','message','parallel','apply','../../../utilities/axios','maxParallel','then','RUNNER_FAILURE_PERF_ENTRY','NX_CLOUD_DISTRIBUTED_EXECUTION_AGENT_COUNT','Workspace\x20is\x20disabled.\x20Cannot\x20perform\x20distributed\x20task\x20executions.','/nx-cloud/executions/complete-run-group','DistributedExecutionApi','stopAgentsOnFailure','true','createStartRequest','next'];(function(_0x1cde6a,_0x3407e0){const _0x1d59bf=function(_0x1474f5){while(--_0x1474f5){_0x1cde6a['push'](_0x1cde6a['shift']());}};_0x1d59bf(++_0x3407e0);}(a6_0x3407,0xdd));const a6_0x1d59=function(_0x1cde6a,_0x3407e0){_0x1cde6a=_0x1cde6a-0x0;let _0x1d59bf=a6_0x3407[_0x1cde6a];return _0x1d59bf;};'use strict';var __awaiter=this&&this[a6_0x1d59('0x25')]||function(_0xed6e40,_0x188052,_0x3f7946,_0x3f9142){function _0x489ad7(_0x1729e0){return _0x1729e0 instanceof _0x3f7946?_0x1729e0:new _0x3f7946(function(_0x103d27){_0x103d27(_0x1729e0);});}return new(_0x3f7946||(_0x3f7946=Promise))(function(_0x6d6530,_0x57fa57){function _0x2013fa(_0xc2c36b){try{_0x19a652(_0x3f9142[a6_0x1d59('0x1c')](_0xc2c36b));}catch(_0x2a4d82){_0x57fa57(_0x2a4d82);}}function _0x2dded7(_0x51cbe8){try{_0x19a652(_0x3f9142[a6_0x1d59('0x24')](_0x51cbe8));}catch(_0x383763){_0x57fa57(_0x383763);}}function _0x19a652(_0x481e75){_0x481e75[a6_0x1d59('0xd')]?_0x6d6530(_0x481e75[a6_0x1d59('0x1e')]):_0x489ad7(_0x481e75['value'])[a6_0x1d59('0x13')](_0x2013fa,_0x2dded7);}_0x19a652((_0x3f9142=_0x3f9142[a6_0x1d59('0x10')](_0xed6e40,_0x188052||[]))[a6_0x1d59('0x1c')]());});};Object[a6_0x1d59('0xa')](exports,'__esModule',{'value':!![]});exports[a6_0x1d59('0x1b')]=exports[a6_0x1d59('0x18')]=void 0x0;const axios_1=require(a6_0x1d59('0x11'));const environment_1=require('../../../utilities/environment');const metric_logger_1=require(a6_0x1d59('0x2d'));const serializer_overrides_1=require('../../../utilities/serializer-overrides');const {output,unparse}=require(a6_0x1d59('0x30'));class DistributedExecutionApi{constructor(_0x29e654){this[a6_0x1d59('0xb')]=(0x0,axios_1[a6_0x1d59('0x2b')])(_0x29e654);}[a6_0x1d59('0x2e')](_0xb0d83a){var _0x3985ce;return __awaiter(this,void 0x0,void 0x0,function*(){const _0x5ccd54=(0x0,metric_logger_1[a6_0x1d59('0x5')])(a6_0x1d59('0x7'));let _0x2e9d4b;try{_0x2e9d4b=yield(0x0,axios_1['axiosMultipleTries'])(()=>this[a6_0x1d59('0xb')]['post'](a6_0x1d59('0x26'),_0xb0d83a));_0x5ccd54[a6_0x1d59('0x2')]((0x0,metric_logger_1[a6_0x1d59('0x23')])(_0x2e9d4b));}catch(_0x4fe3d8){_0x5ccd54[a6_0x1d59('0x2')](((_0x3985ce=_0x4fe3d8===null||_0x4fe3d8===void 0x0?void 0x0:_0x4fe3d8['axiosException'])===null||_0x3985ce===void 0x0?void 0x0:_0x3985ce[a6_0x1d59('0x21')])?(0x0,metric_logger_1[a6_0x1d59('0x23')])(_0x4fe3d8[a6_0x1d59('0x27')]['response']):metric_logger_1[a6_0x1d59('0x14')]);throw _0x4fe3d8;}if(!_0x2e9d4b[a6_0x1d59('0x20')]['enabled']){throw new Error(a6_0x1d59('0x16'));}if(_0x2e9d4b[a6_0x1d59('0x20')][a6_0x1d59('0x22')]){throw new Error(_0x2e9d4b[a6_0x1d59('0x20')][a6_0x1d59('0x22')]);}return _0x2e9d4b['data']['id'];});}[a6_0x1d59('0xc')](_0x2e3d92){var _0x18e400;return __awaiter(this,void 0x0,void 0x0,function*(){const _0x1e9b33=(0x0,metric_logger_1[a6_0x1d59('0x5')])(a6_0x1d59('0x3'));try{const _0x9e251c=yield(0x0,axios_1[a6_0x1d59('0x2c')])(()=>this[a6_0x1d59('0xb')][a6_0x1d59('0x29')](a6_0x1d59('0x0'),{'id':_0x2e3d92}));_0x1e9b33[a6_0x1d59('0x2')]((0x0,metric_logger_1[a6_0x1d59('0x23')])(_0x9e251c));return _0x9e251c[a6_0x1d59('0x20')];}catch(_0x338035){_0x1e9b33['recordMetric'](((_0x18e400=_0x338035===null||_0x338035===void 0x0?void 0x0:_0x338035[a6_0x1d59('0x27')])===null||_0x18e400===void 0x0?void 0x0:_0x18e400[a6_0x1d59('0x21')])?(0x0,metric_logger_1[a6_0x1d59('0x23')])(_0x338035['axiosException']['response']):metric_logger_1['RUNNER_FAILURE_PERF_ENTRY']);output[a6_0x1d59('0x22')]({'title':_0x338035[a6_0x1d59('0xe')]});process['exit'](0x1);}});}[a6_0x1d59('0x6')](_0x141803,_0x5d6417){var _0x39b516;return __awaiter(this,void 0x0,void 0x0,function*(){const _0x12b507=(0x0,metric_logger_1[a6_0x1d59('0x5')])(a6_0x1d59('0x4'));try{const _0x32a64d=yield(0x0,axios_1[a6_0x1d59('0x2c')])(()=>this[a6_0x1d59('0xb')]['post'](a6_0x1d59('0x17'),{'runGroup':_0x141803,'criticalErrorMessage':_0x5d6417}),0x3);_0x12b507[a6_0x1d59('0x2')]((0x0,metric_logger_1[a6_0x1d59('0x23')])(_0x32a64d));}catch(_0x43c5de){_0x12b507['recordMetric'](((_0x39b516=_0x43c5de===null||_0x43c5de===void 0x0?void 0x0:_0x43c5de['axiosException'])===null||_0x39b516===void 0x0?void 0x0:_0x39b516[a6_0x1d59('0x21')])?(0x0,metric_logger_1[a6_0x1d59('0x23')])(_0x43c5de['axiosException'][a6_0x1d59('0x21')]):metric_logger_1[a6_0x1d59('0x14')]);}});}}exports['DistributedExecutionApi']=DistributedExecutionApi;function createStartRequest(_0x48e609,_0x52027f,_0x14170c){const _0x440d6e=_0x52027f[a6_0x1d59('0x8')](_0x2ab164=>{return _0x2ab164['map'](_0x4727b2=>{return{'taskId':_0x4727b2['id'],'hash':_0x4727b2[a6_0x1d59('0x2f')],'projectName':_0x4727b2['target']['project'],'target':_0x4727b2[a6_0x1d59('0x2a')][a6_0x1d59('0x2a')],'configuration':_0x4727b2['target'][a6_0x1d59('0x31')]||null,'params':(0x0,serializer_overrides_1[a6_0x1d59('0x1d')])(_0x4727b2)};});});const _0x5614d4={'command':(0x0,environment_1[a6_0x1d59('0x28')])(),'branch':(0x0,environment_1[a6_0x1d59('0x1')])(),'runGroup':_0x48e609,'tasks':_0x440d6e,'maxParallel':calculateMaxParallel(_0x14170c)};if(environment_1[a6_0x1d59('0x15')]){_0x5614d4[a6_0x1d59('0x1f')]=environment_1[a6_0x1d59('0x15')];}if(!environment_1[a6_0x1d59('0x9')]){_0x5614d4[a6_0x1d59('0x19')]=![];}return _0x5614d4;}exports[a6_0x1d59('0x1b')]=createStartRequest;function calculateMaxParallel(_0x43c836){if(_0x43c836[a6_0x1d59('0xf')]==='false'||_0x43c836[a6_0x1d59('0xf')]===![]){return 0x1;}else if(_0x43c836[a6_0x1d59('0xf')]===a6_0x1d59('0x1a')||_0x43c836[a6_0x1d59('0xf')]===!![]){return Number(_0x43c836[a6_0x1d59('0x12')]||0x3);}else if(_0x43c836[a6_0x1d59('0xf')]===undefined){return _0x43c836[a6_0x1d59('0x12')]?Number(_0x43c836[a6_0x1d59('0x12')]):0x3;}else{return Number(_0x43c836['parallel'])||0x3;}}