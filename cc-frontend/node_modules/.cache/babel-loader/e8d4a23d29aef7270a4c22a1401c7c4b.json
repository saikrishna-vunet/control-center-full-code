{"ast":null,"code":"import * as React from 'react';\nimport { styled } from '@mui/material/styles';\nimport ArrowForwardIosSharpIcon from '@mui/icons-material/ArrowForwardIosSharp';\nimport MuiAccordion from '@mui/material/Accordion';\nimport MuiAccordionSummary from '@mui/material/AccordionSummary';\nimport MuiAccordionDetails from '@mui/material/AccordionDetails';\nimport Typography from '@mui/material/Typography';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport axios from 'axios';\nimport url_backend from '../configs/url';\nimport { jsx as _jsx } from \"@emotion/react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"@emotion/react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"@emotion/react/jsx-runtime\";\nconst Accordion = styled(props => _jsx(MuiAccordion, Object.assign({\n  disableGutters: true,\n  elevation: 0,\n  square: true\n}, props)))(({\n  theme\n}) => ({\n  border: `1px solid ${theme.palette.divider}`,\n  '&:not(:last-child)': {\n    borderBottom: 0\n  },\n  '&:before': {\n    display: 'none'\n  }\n}));\nconst AccordionSummary = styled(props => _jsx(MuiAccordionSummary, Object.assign({\n  expandIcon: _jsx(ArrowForwardIosSharpIcon, {\n    sx: {\n      fontSize: '0.9rem'\n    }\n  })\n}, props)))(({\n  theme\n}) => ({\n  backgroundColor: theme.palette.mode === 'dark' ? 'rgba(255, 255, 255, .05)' : 'rgba(0, 0, 0, .03)',\n  flexDirection: 'row-reverse',\n  '& .MuiAccordionSummary-expandIconWrapper.Mui-expanded': {\n    transform: 'rotate(90deg)'\n  },\n  '& .MuiAccordionSummary-content': {\n    marginLeft: theme.spacing(1)\n  }\n}));\nconst AccordionDetails = styled(MuiAccordionDetails)(({\n  theme\n}) => ({\n  padding: theme.spacing(2),\n  borderTop: '1px solid rgba(0, 0, 0, .125)'\n}));\nexport const ControlledAccordions = ({\n  data\n}) => {\n  const [expanded, setExpanded] = React.useState('panel1');\n\n  const handleChange = panel => (event, newExpanded) => {\n    setExpanded(newExpanded ? panel : false);\n  };\n\n  const [hostsdata, sethostsData] = React.useState([]);\n  const request_url = url_backend + '/api/hosts/';\n\n  const getHostsData = async () => {\n    try {\n      const data = await axios.get(request_url);\n      sethostsData(data.data);\n    } catch (e) {\n      console.log(e);\n    }\n  };\n\n  React.useEffect(() => {\n    getHostsData();\n  }, []);\n\n  const returnInstance = (temp, serviceName) => {\n    let currentInstance = 0;\n    temp.services.forEach(({\n      Name,\n      Instances\n    }) => {\n      if (Name === serviceName) {\n        console.log(Name, Instances);\n        currentInstance = Instances;\n      }\n    });\n    return currentInstance;\n  };\n\n  return _jsx(_Fragment, {\n    children: data.map((row, index) => _jsxs(\"div\", {\n      children: [_jsxs(Typography, {\n        sx: {\n          flex: '1 1 100%'\n        },\n        variant: \"h6\",\n        id: \"tableTitle\",\n        component: \"div\",\n        children: [\"Service \", '>>', \" \", row.name]\n      }), _jsx(\"span\", {\n        style: {\n          marginLeft: '.5rem'\n        }\n      }), _jsxs(\"div\", {\n        style: {\n          display: 'flex',\n          alignItems: 'center'\n        },\n        children: [_jsx(Typography, {\n          children: \"Service Type\"\n        }), _jsx(\"span\", {\n          style: {\n            marginLeft: '.5rem'\n          }\n        }), _jsx(Paper, {\n          variant: \"outlined\",\n          elevation: 8,\n          children: _jsx(Typography, {\n            variant: \"subtitle1\",\n            sx: {\n              paddingTop: '.3rem',\n              paddingBottom: '.3rem',\n              paddingRight: '0.8rem',\n              paddingLeft: '.8rem'\n            },\n            children: row.type\n          })\n        })]\n      }), _jsx(\"span\", {\n        style: {\n          marginLeft: '.5rem'\n        }\n      }), _jsxs(Accordion, {\n        expanded: expanded === 'panel1',\n        onChange: handleChange('panel1'),\n        children: [_jsx(AccordionSummary, {\n          \"aria-controls\": \"panel1d-content\",\n          id: \"panel1d-header\",\n          children: _jsx(Typography, {\n            children: \"Basic Information\"\n          })\n        }), _jsx(AccordionDetails, {\n          children: _jsx(Typography, {\n            children: row.description\n          })\n        })]\n      }), _jsxs(Accordion, {\n        expanded: expanded === 'panel2',\n        onChange: handleChange('panel2'),\n        children: [_jsx(AccordionSummary, {\n          \"aria-controls\": \"panel2d-content\",\n          id: \"panel2d-header\",\n          children: _jsx(Typography, {\n            children: \"Instances and Host Mapping\"\n          })\n        }), _jsx(AccordionDetails, {\n          children: _jsxs(\"div\", {\n            style: {\n              display: 'flex'\n            },\n            children: [_jsxs(\"div\", {\n              style: {\n                display: 'inline-block',\n                float: 'left'\n              },\n              children: [_jsx(Table, {\n                style: {\n                  width: '200px',\n                  border: 1\n                },\n                children: _jsx(TableHead, {\n                  children: _jsxs(TableRow, {\n                    children: [_jsx(TableCell, {\n                      children: \"Instances\"\n                    }), _jsx(TableCell, {\n                      align: \"right\",\n                      children: row.actual_instances\n                    })]\n                  })\n                })\n              }), _jsx(\"span\", {\n                style: {\n                  marginLeft: '.5rem'\n                }\n              }), _jsx(Typography, {\n                children: \"Hosts\"\n              }), _jsx(Table, {\n                style: {\n                  width: '200px'\n                },\n                children: _jsx(TableBody, {\n                  children: row.hosts.map(row => _jsx(TableRow, {\n                    children: _jsx(TableCell, {\n                      component: \"th\",\n                      scope: \"row\",\n                      children: row\n                    })\n                  }, row))\n                })\n              })]\n            }), _jsxs(\"div\", {\n              style: {\n                display: 'inline-block',\n                marginInline: '250px'\n              },\n              children: [_jsx(Typography, {\n                children: \"Current Allocation\"\n              }), _jsx(Table, {\n                style: {\n                  width: '300px'\n                },\n                children: _jsx(TableBody, {\n                  children: hostsdata.map((tuple, index) => _jsxs(TableRow, {\n                    children: [_jsx(TableCell, {\n                      component: \"th\",\n                      scope: \"row\",\n                      children: tuple.name\n                    }), _jsx(TableCell, {\n                      children: returnInstance(tuple, row.name)\n                    })]\n                  }, index))\n                })\n              })]\n            })]\n          })\n        })]\n      }), _jsxs(Accordion, {\n        expanded: expanded === 'panel3',\n        onChange: handleChange('panel3'),\n        children: [_jsx(AccordionSummary, {\n          \"aria-controls\": \"panel3d-content\",\n          id: \"panel3d-header\",\n          children: _jsx(Typography, {\n            children: \"Health\"\n          })\n        }), _jsx(AccordionDetails, {\n          children: _jsx(Typography, {\n            children: row.state\n          })\n        })]\n      })]\n    }))\n  });\n};","map":null,"metadata":{},"sourceType":"module"}